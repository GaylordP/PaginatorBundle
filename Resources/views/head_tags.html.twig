{% set route = 'paginated' in app.request.get('_route') ? app.request.get('_route') : app.request.get('_route') ~ '_paginated' %}
{% if paginator.hasPreviousPage %}
    <link rel="prev" href="{{ absolute_url(path(route, app.request.get('_route_params')|merge(
        {
            'page': paginator.previousPage,
        }
    )|merge(app.request.query.all))) }}" />
{% endif %}
{% if paginator.hasNextPage %}
    <link rel="next" href="{{ absolute_url(path(route, app.request.get('_route_params')|merge(
        {
            'page': paginator.nextPage,
        }
    )|merge(app.request.query.all))) }}" />
{% endif %}
<link rel="canonical" href="{{ absolute_url(path(route, app.request.get('_route_params')|merge(app.request.query.all))) }}" />